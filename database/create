DROP DATABASE IF EXISTS wod;
CREATE DATABASE `wod`;
USE `wod`;

CREATE TABLE user_auth (
  id INT(11) NOT NULL AUTO_INCREMENT,
  email VARCHAR(255) NOT NULL,
  password VARCHAR(255) NOT NULL,
  PRIMARY KEY(id),
  UNIQUE KEY (email)
) ENGINE=INNODB DEFAULT CHARSET=utf8;


CREATE TABLE user_info (
  id INT(11) NOT NULL AUTO_INCREMENT,
  name VARCHAR(255) NOT NULL,
  level INT(11) NOT NULL DEFAULT 1,
  location INT(11) NOT NULL DEFAULT 1,
  money INT(11) NOT NULL DEFAULT 100,
  exp INT(11) NOT NULL DEFAULT 0,
  PRIMARY KEY(id),
  UNIQUE KEY(name),
  FOREIGN KEY (id) REFERENCES user_auth(id) ON DELETE CASCADE
) ENGINE=INNODB DEFAULT CHARSET=utf8;


CREATE TABLE location (
  id INT(11) NOT NULL AUTO_INCREMENT,
  name VARCHAR(255) NOT NULL,
  PRIMARY KEY(id)
) ENGINE=INNODB DEFAULT CHARSET=utf8;


CREATE TABLE loc_loc (
  id INT(11) NOT NULL AUTO_INCREMENT,
  locid_in INT(11) NOT NULL,
  locid_out INT(11) NOT NULL,
  PRIMARY KEY(id),
  UNIQUE KEY loc_loc(locid_in,locid_out),
  FOREIGN KEY (locid_in) REFERENCES location(id) ON DELETE CASCADE,
  FOREIGN KEY (locid_out) REFERENCES location(id) ON DELETE CASCADE
) ENGINE=INNODB DEFAULT CHARSET=utf8;